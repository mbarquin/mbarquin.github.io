<!DOCTYPE html><html lang="es-ES"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Publicación de desarrollos, análisis y tests sobre las nuevas librerías y herramientas para la programación PHP"><title>Estructura de un proyecto PHP | mercenariophp</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Estructura de un proyecto PHP</h1><a id="logo" href="/.">mercenariophp</a><p class="description">Experimentos y anotaciones de un dev</p></div><div id="nav-menu"><a href="/." class="current"><i class="icon-home"> Inicio</i></a><a href="/archives/"><i class="icon-archive"> Archivo</i></a><a href="/repos/"><i class="icon-github"> Repos</i></a><a href="/mbarquin/"><i class="icon-about"> mbarquin</i></a><a href="/atom.xml"><i class="icon-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">Estructura de un proyecto PHP</h1><div class="post-meta">04 / 05 / 2016<span class="categories"> | Guardado en<a href="/categories/Desarrollo/"> Desarrollo</a></span></div><span data-disqus-identifier="estructura-directorios-proyecto-php/" class="disqus-comment-count"></span><div class="post-content"><p>Estoy preparando un pequeña estructura de directorios para poder usar como modelo al iniciar un proyecto, estoy enganchado a <a href="https://getcomposer.org/" target="_blank" rel="noopener">Composer</a> y adaptándome a usar <a href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a>, por lo que ya genero todo con esto en mente y dejo los ficheros básicos preconfigurados. Todo debe estar organizado bajo un árbol de directorios claro, que nos permita clasificar y separar los diferentes archivos de configuración, dependencias, herramientas y código fuente. Habitualmente en el directorio raíz dejo los archivos relacionados con la virtualización, configuración, temporales, etc… es el nivel “máquina”, después genero una carpeta <strong>src</strong> donde vuelco todo mi código fuente, tests y carpetas de librerías externas.</p>
<a id="more"></a>

<h2 id="El-directorio-raiz"><a href="#El-directorio-raiz" class="headerlink" title="El directorio raíz"></a>El directorio raíz</h2><p>El nombre de esta carpeta es la principal seña de identidad del proyecto, debería tener un nombre claro y descriptivo. Generalmente utilizo el mismo que le voy a dar al repositorio, de manera que de un vistazo a mi carpeta de proyectos sepa qué es cada cosa. Dentro de este primer nivel encontramos ficheros como composer.json (dependencias) y/o Dockerfile + docker-compose.yml (virtualización del proyecto). También el readme.md, un fichero en el que se puede describir el proyecto, su uso y dependencias. La mayoría de los repositorios tipo Git van a ser capaces de interpretar este contenido markdown para generar una página informativa del proyecto. Estos archivos son totalmente opcionales, cualquier cosa que sea innecesaria o no se adecue a nuestro desarrollo se podrá eliminar sin problemas, los incluyo para preconizar el uso de las herramientas PHP actuales.</p>
<p><img src="/images/projectInit/dirTree.png" alt></p>
<p>En este primer nivel trabajo con dos tipos de directorios además de <strong>src</strong>. Por un lado, los que contienen o van a contener los archivos de configuración necesarios para el setup de la máquina, virtual o no, que va a sostener el desarrollo, como <strong>config</strong> y <strong>sql</strong>. Por otro lado dispongo los directorios que van a contener ficheros generados durante la ejecución o despliegue del proyecto, como <strong>log</strong>, <strong>tmp</strong> y <strong>build</strong>. Para evitar que GIT versione el contenido de este segundo tipo de directorios, incluyo en el raíz de cada subnivel un fichero .gitignore muy sencillo. Ignora todo * salvo a si mismo !.gitignore.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line"></span><br><span class="line">!.gitignore</span><br></pre></td></tr></table></figure>

<h2 id="Los-subdirectrorios-de-configuracion-e-inicializacion"><a href="#Los-subdirectrorios-de-configuracion-e-inicializacion" class="headerlink" title="Los subdirectrorios de configuración e inicialización"></a>Los subdirectrorios de configuración e inicialización</h2><p><img src="/images/projectInit/configTree.png" alt></p>
<p><strong>config</strong><br>Destinado a almacenar ficheros como la configuración especifica de apache, php.ini o cualquier otra cosa que necesitemos para configurar el servidor que de vida al proyecto.</p>
<p><strong>sql</strong><br>Contendrá un fichero o varios con la estructura de la base de datos, de manera que al hacer un rebase del proyecto a otras maquinas tengamos disponible una importación que nos inicialize la base de datos y así poder comenzar a desarrollar.</p>
<h2 id="Los-subdirectrorios-de-trabajo"><a href="#Los-subdirectrorios-de-trabajo" class="headerlink" title="Los subdirectrorios de trabajo"></a>Los subdirectrorios de trabajo</h2><p><img src="/images/projectInit/workingTree.png" alt></p>
<p><strong>build</strong><br>Contendrá los archivos resultado generados por las herramientas de calidad del código, como los análisis de coverage, phpmetrics etc… Configuro las herramientas para que dejen estos logs aquí. Dependiendo de lo que se este haciendo y el interés que se tenga en estas métricas se puede subdividir esta carpeta o no.</p>
<p><strong>db</strong><br>Para los archivos generados por el container docker de base de datos ;)</p>
<p><strong>log</strong><br>Es el lugar que preparo para que apache o mysql dejen los archivos de log, también los propios de la aplicación. Esta carpeta se desglosa en varios subniveles, como <strong>apache</strong>, <strong>sql</strong> o <strong>app</strong>.</p>
<p><strong>tmp</strong><br>Destinada a hacer de directorio temporal para el proyecto, compilaciones de smarty, archivos de cache, compilaciones de gettext o <strong>cualquier operación que implique permisos de escritura para el usuario nobody</strong>.</p>
<p>Estos subdirectorios deberán tener una gama de permisos que permitan a los usuarios de los servicios determinados escribir en ellos (nobody, mysql, etc).</p>
<h2 id="src-El-codigo"><a href="#src-El-codigo" class="headerlink" title="src, El código"></a>src, El código</h2><p><img src="/images/projectInit/sourcesTree.png" alt></p>
<p><strong>src/private</strong><br>El código fuente de la aplicación, modelos, controladores, scripts, todo lo que desarrollemos debería estar aquí dentro.</p>
<p><strong>src/public</strong><br>Contiene los ficheros expuestos por el servidor (DocumentRoot), generalmente un index que direcciona las peticiones de los navegadores al código fuente dentro de src/private.</p>
<p><strong>src/test</strong><br>Es el lugar para los tests, en esta caso contiene la configuración base de PHPUnit, los direcotorios <strong>files</strong> y <strong>private</strong> para alojar los tests de nuestras clases definidas en src/private.</p>
<p><strong>src/vendor</strong><br>Aquí dejará composer las librerías de las dependencias y los archivos de autoload.</p>
<p>Para este grupo de carpetas generalmente solo hacen falta permisos de lectura para el usuario apache.</p>
<p>Dejo descrita la sección de la configuración de <strong>/composer.json</strong> para que utilice el directorio src/vendor, también la configuración básica de un namespace con el estándar de autoloading <a href="http://www.php-fig.org/psr/psr-4/" target="_blank" rel="noopener">psr-4</a>.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"config": &#123;</span><br><span class="line">    "vendor-dir": "src/vendor"</span><br><span class="line">&#125;,</span><br><span class="line">"autoload": &#123;</span><br><span class="line">"psr-4": &#123; "MyApp\\": "src/private" &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Este es más o menos el árbol de directorios que utilizo para organizar los proyectos y cosas nuevas que voy desarrollando, creo que se adapta bien a todas las herramientas que suelo utilizar, tanto desde shell como desde el IDE. Supongo que cada uno tiene su estructura ya más o menos establecida, lo importante es que los permisos y visibilidad de los directorios no comprometa la seguridad del proyecto, una vez asegurado esto, podemos almacenar el código y su setup como nos haga sentir más cómodos.</p>
</div><div class="tags"><a href="/tags/PHP/">PHP</a><a href="/tags/Composer/">Composer</a><a href="/tags/Docker/">Docker</a></div><div class="post-nav"><a href="/slim-dynamic-routing-factory-setup/" class="pre"><i class="icon-previous">Experimentando con Slim, dynamic routing mediante un objeto Factory</i></a><a href="/slim-controller-usando-di-patron-factory/" class="next">Slim3 controllers usando DI con el patrón Factory<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'mercenariophp';
var disqus_identifier = 'estructura-directorios-proyecto-php/';
var disqus_title = 'Estructura de un proyecto PHP';
var disqus_url = 'https://www.mercenariophp.com/estructura-directorios-proyecto-php/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//mercenariophp.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"><input type="hidden" name="sitesearch" value="https://www.mercenariophp.com"></form></div><div class="widget lessMargin"><div style="text-align: left;"><div style="width: 84px; height: 40px;"><a href="https://twitter.com/mercenariophp" rel="nofollow" target="_blank" class="twitter_big"></a><a href="https://es.linkedin.com/in/moisés-barquín-salgado-b6148296" rel="nofollow" target="_blank" class="linkedin_big"></a></div></div></div><div class="widget"><div class="widget-title">Categorías</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Desarrollo/">Desarrollo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tutoriales-Symfony/">Tutoriales Symfony</a></li></ul></div><div class="widget"><div class="widget-title">Etiquetas</div><div class="tagcloud"><a href="/tags/tests/" style="font-size: 15px;">tests</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Laravel/" style="font-size: 15px;">Laravel</a> <a href="/tags/PagesGenerator/" style="font-size: 15px;">PagesGenerator</a> <a href="/tags/Herramientas/" style="font-size: 15px;">Herramientas</a> <a href="/tags/Tutorial/" style="font-size: 15px;">Tutorial</a> <a href="/tags/PHPUnit/" style="font-size: 15px;">PHPUnit</a> <a href="/tags/Composer/" style="font-size: 15px;">Composer</a> <a href="/tags/NetBeans/" style="font-size: 15px;">NetBeans</a> <a href="/tags/IDE/" style="font-size: 15px;">IDE</a> <a href="/tags/ReactPHP/" style="font-size: 15px;">ReactPHP</a> <a href="/tags/Slim/" style="font-size: 15px;">Slim</a> <a href="/tags/SQL/" style="font-size: 15px;">SQL</a> <a href="/tags/Pattern/" style="font-size: 15px;">Pattern</a> <a href="/tags/Repositorio/" style="font-size: 15px;">Repositorio</a> <a href="/tags/Frameworks/" style="font-size: 15px;">Frameworks</a></div></div><div class="widget"><div class="widget-title">Recientes</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/php-dotenv-variables-entorno/">PHP Dotenv, configuración en variables de entorno</a></li><li class="post-list-item"><a class="post-list-link" href="/vacaciones/">Vacaciones</a></li><li class="post-list-item"><a class="post-list-link" href="/retornando-objetos-valor/">Retornando objetos de valor en lugar de arrays</a></li><li class="post-list-item"><a class="post-list-link" href="/tutorial-symfony-bundles-knpmenubundle/">Tutorial de Symfony 3: Bundles y KnpMenuBundle</a></li><li class="post-list-item"><a class="post-list-link" href="/descarga-ficheros-comprimidos-Archivestream-php/">Descarga de ficheros comprimidos con ArchiveStream-php</a></li><li class="post-list-item"><a class="post-list-link" href="/tutorial-symfony-doctrine-orm/">Tutorial de Symfony 3: Doctrine ORM y Base de Datos</a></li><li class="post-list-item"><a class="post-list-link" href="/tutorial-symfony-twig/">Tutorial de Symfony 3: Twig, base layout con Bootstrap</a></li><li class="post-list-item"><a class="post-list-link" href="/tutorial-symfony/">Tutorial de Symfony 3: Instalación, routing y controllers</a></li><li class="post-list-item"><a class="post-list-link" href="/refactorizando-reactphp-slim/">Refactorizando reactphp-slim</a></li><li class="post-list-item"><a class="post-list-link" href="/editor-hackeable-atom/">Editor hackeable Atom, el editor para el siglo 21</a></li></ul></div><div class="widget"><div class="widget-title">Comentarios recientes</div><script type="text/javascript" src="//mercenariophp.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title">Blogroll</div><ul></ul><a href="http://www.phptherightway.com/" title="PHP The Right Way" target="_blank">PHP The Right Way</a></div></div></div></div><div id="footer"><a href="https://twitter.com/mercenariophp" rel="nofollow" class="twitter"></a> <a href="https://es.linkedin.com/in/moisés-barquín-salgado-b6148296" rel="nofollow" class="linkedin"></a> © <a href="/." rel="nofollow">mercenariophp.</a> With<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-78289384-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>