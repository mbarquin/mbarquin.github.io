<!DOCTYPE html><html lang="es-ES"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Publicación de desarrollos, análisis y tests sobre las nuevas librerías y herramientas para la programación PHP"><title>Tutorial de Symfony 3: Instalación, routing y controllers | mercenariophp</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Tutorial de Symfony 3: Instalación, routing y controllers</h1><a id="logo" href="/.">mercenariophp</a><p class="description">Experimentos y anotaciones de un dev</p></div><div id="nav-menu"><a href="/." class="current"><i class="icon-home"> Inicio</i></a><a href="/archives/"><i class="icon-archive"> Archivo</i></a><a href="/repos/"><i class="icon-github"> Repos</i></a><a href="/mbarquin/"><i class="icon-about"> mbarquin</i></a><a href="/atom.xml"><i class="icon-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">Tutorial de Symfony 3: Instalación, routing y controllers</h1><div class="post-meta">02 / 12 / 2016<span class="categories"> | Guardado en<a href="/categories/Tutoriales-Symfony/"> Tutoriales Symfony</a></span></div><span data-disqus-identifier="tutorial-symfony/" class="disqus-comment-count"></span><div class="post-content"><p><a href="https://symfony.com/" target="_blank" rel="noopener">Symfony</a> es uno de los frameworks más utilizados, versátiles y potentes del mercado. Sus componentes como el gestor de plantillas Twig, su ORM/DBAL Doctrine o su firme acogida a los estandares le han hecho merecedor de una posición privilegiada entre las opciones de las grandes empresas. Está tras plataformas tan potentes como <a href="https://www.phpbb.com/" target="_blank" rel="noopener">phpBB</a>, <a href="https://www.drupal.org/" target="_blank" rel="noopener">drupal</a> o <a href="https://blackfire.io/" target="_blank" rel="noopener">blackfire</a>. Tiempo atrás había hecho algún experimento para ver como funcionaba, pero a día de hoy estoy desactualizado. Voy a desarrollar una pequeña aplicación para tener una base desde la que iniciar un proyecto orientado a <strong><a href="https://en.wikipedia.org/wiki/Continuous_delivery" target="_blank" rel="noopener">continuous-delivery</a></strong>, y así familiarizarme con su estructura y forma de trabajo. He hecho bases parecidas en CakePHP y trabajado con Zend, aunque en este último no llegué nunca a ver el CRUD generator. Los resultados son muy buenos, estaba especialmente contento con CakePHP, a ver que puedo sacar de Symfony.</p>
<p>A lo largo de varios posts generaré una aplicación esqueleto que implementará un control de usuarios (ACL), un sistema de menú, traducciones, los interfaces de estos sistemas y las plantillas necesarias para conformar un layout. Al comenzar un nuevo desarrollo nos quitaremos de encima la primera carga de trabajo que es montar la base. Con muy poco esfuerzo conseguiremos levantar una nueva instancia de aplicación para mostrar, y ganaremos tiempo para desarrollar las primeras pantallas de gestión de básicos. Hay que recordar que <strong>lo que no esta en producción no tiene valor</strong>, de manera que cuanto antes tengamos partes funcionales en producción antes empezaremos a generar.</p>
<a id="more"></a>

<h3 id="Instalacion"><a href="#Instalacion" class="headerlink" title="Instalación"></a>Instalación</h3><p>Teniendo composer instalado, la creación del proyecto será algo sencillo (Hice una pequeña introducción a Composer <a href="https://www.mercenariophp.com/tutorial-php-composer/">aqui</a>). Lo más fácil para inicializar el proyecto será ubicarnos en el directorio donde vamos a crear el proyecto y escribir el comando. Este ya se encarga de crear la carpeta del proyecto y poblarla con una aplicación Symfony vacía.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer create-project symfony/framework-standard-edition my_project_name</span><br></pre></td></tr></table></figure>

<p>Al terminar la instalación de Symfony y sus dependencias, el build script nos pedirá los siguientes parámetros.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">database_host (127.0.0.1):</span><br><span class="line">database_port (null):</span><br><span class="line">database_name (symfony):</span><br><span class="line">database_user (root):</span><br><span class="line">database_password (null):</span><br><span class="line">mailer_transport (smtp):</span><br><span class="line">mailer_host (127.0.0.1):</span><br><span class="line">mailer_user (null):</span><br><span class="line">mailer_password (null):</span><br><span class="line">secret (ThisTokenIsNotSoSecretChangeIt):</span><br></pre></td></tr></table></figure>

<p>Son las variables necesarias para la conexión a la base de datos y la configuración del cliente de correo de Symfony, más tarde se puede cambiar en el archivo app/config/parameters.yml.</p>
<p>Ya tenemos el esqueleto base para poder utilizar Symfony. Desde el shell/cmd navegamos al directorio raíz del proyecto, con el siguiente comando levantamos un servidor basado en el nativo de PHP. Es muy parecido al servidor HTTP de reactPHP y válido sólo para desarrollo.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> my_project_name</span><br><span class="line">php bin/console server:run</span><br></pre></td></tr></table></figure>

<p>Podremos acceder a la aplicación con el navegador, a través de la url <a href="http://localhost:8000/" target="_blank" rel="noopener">http://localhost:8000/</a>.</p>
<p><img src="/images/tutorialSymfony/symfonyWelcome.png" alt></p>
<p>Después de acceder a la pagina de presentación podemos acceder a través de la url <a href="http://localhost:8000/config.php" target="_blank" rel="noopener">http://localhost:8000/config.php</a> a una pagina encargada de comprobar que la plataforma ha sido instalada correctamente. Durante su carga verifica varios parámetros y al final presentan algunos consejos para mejorar la experiencia Symfony. Como instalar la extensión intl, phpAccelerator o cambiar algún parámetro de la configuración.</p>
<h3 id="Estructura-en-disco-del-proyecto-Symfony"><a href="#Estructura-en-disco-del-proyecto-Symfony" class="headerlink" title="Estructura en disco del proyecto Symfony"></a>Estructura en disco del proyecto Symfony</h3><p>Al entrar al directorio del proyecto podemos comprobar que se han desplegado varias carpetas organizadas de la siguiente manera.</p>
<ul>
<li><p><em>app</em><br>Configuración, plantillas y traducciones de la aplicación.</p>
</li>
<li><p><em>bin</em><br>En este directorio reside el ejecutable de consola, que nos vale para invocar las utilidades del cliente desde nuestro terminal.</p>
</li>
<li><p><em>src</em><br>El código fuente de nuestra aplicación.</p>
</li>
<li><p><em>tests</em><br>Almacena los sources de tests, ya sea PHPUnit, codeception u otra herramienta. Su estructura es una réplica de <em>src</em></p>
</li>
<li><p><em>var</em><br>El directorio temporal, aquí se almacenan los archivos de cache, log, sesión, etc..</p>
</li>
<li><p><em>vendor</em><br>Contiene las librerias externas que utilicemos así como el core de Symfony, es el directorio que utiliza Composer para mantener las dependencias.</p>
</li>
</ul>
<h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><p>Para entender un poco la forma en que vamos a trabajar hace falta entender que Simfomy es un framework MVC, es decir, basa su trabajo en una estructura fija denominada Modelo-Vista-Controlador.</p>
<ul>
<li><p><em>El modelo</em><br>Mantiene la mayor parte de la lógica e interactúa con los datos (Base de Datos).</p>
</li>
<li><p><em>La vista</em><br>Es el canal de salida, el puente para enviar los datos, que devuelve el modelo, al usuario que accede al sistema, por ejemplo través de un template HTML (interfaz), o un formato JSON esperado por una llamada tipo REST.</p>
</li>
<li><p><em>El controlador</em><br>Atiende las peticiones o eventos, llama a la lógica de los modelos y retorna el resultado al cliente a través de la vista.</p>
</li>
</ul>
<p>De esta forma se consigue una separación de conceptos clara a la hora de abordar un desarrollo.</p>
<p><img src="/images/tutorialSymfony/ModelViewControllerDiagram_es.png" alt></p>
<p>En este caso solo vamos a tocar el código del controlador para poder interactuar con la aplicación, con esto podremos ver de manera básica las respuestas a nuestras peticiones.</p>
<h3 id="Manos-a-la-obra-El-codigo"><a href="#Manos-a-la-obra-El-codigo" class="headerlink" title="Manos a la obra, El código"></a>Manos a la obra, El código</h3><p>Vamos a seguir el ejemplo de la web de Symfony, como dijimos, el controlador es el encargado de recibir las peticiones o eventos así que empezaremos prescindiendo de modelos y vistas. Generaremos un controlador que ante una request, determinada por una ruta, retornará un pequeño código HTML al cliente. Así que creamos un fichero llamado BlogController.php dentro de la carpeta src/AppBundle/Controller, con el siguiente código.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/AppBundle/Controller/BlogController.php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">AppBundle</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Symfony</span>\<span class="title">Bundle</span>\<span class="title">FrameworkBundle</span>\<span class="title">Controller</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Sensio</span>\<span class="title">Bundle</span>\<span class="title">FrameworkExtraBundle</span>\<span class="title">Configuration</span>\<span class="title">Route</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Symfony</span>\<span class="title">Component</span>\<span class="title">HttpFoundation</span>\<span class="title">Response</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BlogController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Route</span>("/blog")</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">listAction</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Response(</span><br><span class="line">            <span class="string">'&lt;html&gt;&lt;body&gt;Reading Blog index page&lt;/body&gt;&lt;/html&gt;'</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Su cometido es devolver el índice de noticias al acceder con el navegador a la ruta <a href="http://localhost:8000/blog" target="_blank" rel="noopener">http://localhost:8000/blog</a>, si aun tenemos en marcha el servidor para el primer test pulsamos ctrl+c para detenerlo, y/o, volvemos a arrancar el proceso con el mismo comando.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php bin/console server:run</span><br></pre></td></tr></table></figure>

<h3 id="Controladores-y-acciones"><a href="#Controladores-y-acciones" class="headerlink" title="Controladores y acciones"></a>Controladores y acciones</h3><p>El controlador puede ser cualquier callable PHP, una closure, una función o un método dentro de una clase, que lee información de un objeto <strong>Request</strong> y retorna un objeto <strong>Response</strong>. Se suele utilizar un método de una clase, el nombre de este objeto es bueno que incluya el sufijo Controller (BlogController), utilizado por convenio, muchas funciones del framework esperan encontrar y utilizar este sufijo.</p>
<p>Generalmente esta clase se encarga de congregar las distintas acciones relativas a una misma entidad dentro del programa, como usuarios, noticias, comentarios.. Las acciones son métodos públicos dentro del objeto controlador, definidos para manejar un evento o request concreta. Las acciones, por convenio, se definen con el sufijo Action (listAction). En realidad estas acciones son el controller real para la petición definida, pero es costumbre llamar controller al objeto y action a las funciones que congrega.</p>
<p>Symfony nos provee con un base Controller, Symfony\Bundle\FrameworkBundle\Controller\Controller que no es obligatorio extender con el nuestro, pero hacerlo nos garantiza el acceso a métodos helper y al container de servicios. Estos helpers nos ayudaran con determinadas rutinas como escribir los enlaces a distintas partes de nuestra aplicacion, redirigir al usuario hacia algun punto determinado, o renderizar un template twig para inyectarlo en una response que posteriormente devolveremos. Despues de extender el Controller de Symfony tendremos acceso a estos métodos.</p>
<ul>
<li><p><strong>generateUrl()</strong><br>Este helper genera una url válida para una ruta definida en el sistema.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$url = <span class="keyword">$this</span>-&gt;generateUrl(<span class="string">'blog_list'</span>, <span class="keyword">array</span>(<span class="string">'page'</span> =&gt; <span class="string">'slug-value'</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>redirectToRoute()</strong><br>Retorna un onjeto response con los headers peparados para realizar una redireccion a una ruta definida en el sistema. Si la acción retorna este objeto se producirá la redirección en el cliente.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">indexAction</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// redirect to the "listAction" route</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;redirectToRoute(<span class="string">'blog_list'</span>, <span class="keyword">array</span>(<span class="string">'page'</span> =&gt; <span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>render()</strong><br>Prepara y genera el contenido a partir de una plantilla (Template), retorna una reponse con este contenido ya inyectado.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;render(<span class="string">'blog/number.html.twig'</span>, <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'name'</span> =&gt; $name</span><br><span class="line">));</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Las-rutas"><a href="#Las-rutas" class="headerlink" title="Las rutas"></a>Las rutas</h3><p>Las rutas en Symfony son patrones complejos que informan a la aplicación sobre que acción dentro de cada controlador resolverá una petición determinada. También puede definir los parámetros esperados por esa acción.</p>
<p>Se definen en los comentarios de cada método, en la primera ejecución, el core de Symfony recogerá estas anotaciones y las dispondrá en la cache para las siguientes ejecuciones. De esta manera el código es más claro y evitamos tener la información repartida por distintos ficheros en el sistema.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Route</span>("/blog/&#123;page&#125;", name="blog_list", requirements=&#123;"page": "\d+"&#125;)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">listAction</span><span class="params">($page = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Code Here.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Esta es una ruta definida en los comentarios de una function, la declaración de la ruta se realiza mediante el tag <strong>@Route(ruta, nombre, requisito)</strong>, sus parámetros estaba medio camino entre el HTML y la programación estructurada.</p>
<ul>
<li><p>ruta, entre comillas definiremos la parte de la url a la que hay que llamar, sin incluir el dominio. Por ejemplo /users o /blog/comments. Se acepta una sintaxis que nos permite establecer una parte de la ruta como variable y que la queremos recibir como parámetro en la acción, esto se denomina placeholder. Así que si definimos un placeholder, un nombre entre llaves en la ruta, “/blog/{placeholder}”, podremos recibir en la acción una variable $placeholder con ese valor y presentar solo la información de la página requerido en la petición.</p>
</li>
<li><p>nombre, es el nombre interno que podremos utilizar para identificar las rutas que definimos. sigue el formato name=”nombreRuta”</p>
</li>
<li><p>requisito, es un array JSON de requisitos para los placeholders, es decir, una expresión regular que define si una parte de la ruta se puede considerar válida para inyectar al placeholder calificado. De esta manera permite discriminar o encauzar rutas en función de su valor. Pongamos el caso que definimos dos rutas muy parecidas.</p>
</li>
</ul>
<p>Para hacer algún test con los requisitos y parámetros podemos crear un fuente dentro de src/AppBundle/Controller denominado BlogController.php en el que escribiremos el siguiente código.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/AppBundle/Controller/BlogController.php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">AppBundle</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Symfony</span>\<span class="title">Component</span>\<span class="title">HttpFoundation</span>\<span class="title">Response</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Symfony</span>\<span class="title">Bundle</span>\<span class="title">FrameworkBundle</span>\<span class="title">Controller</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Sensio</span>\<span class="title">Bundle</span>\<span class="title">FrameworkExtraBundle</span>\<span class="title">Configuration</span>\<span class="title">Route</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BlogController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Route</span>("/blog/&#123;page&#125;", name="blog_list", requirements=&#123;"page": "\d+"&#125;)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">listAction</span><span class="params">($page=<span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Response(</span><br><span class="line">            <span class="string">'&lt;html&gt;&lt;body&gt;Showing page number: '</span>.$page.<span class="string">'&lt;/body&gt;&lt;/html&gt;'</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Route</span>("/blog/&#123;title&#125;", name="blog_read", requirements=&#123;"title": "\S+"&#125;)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">readAction</span><span class="params">($title)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Response(</span><br><span class="line">            <span class="string">'&lt;html&gt;&lt;body&gt;Showing post:'</span>.$title.<span class="string">'&lt;/body&gt;&lt;/html&gt;'</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>El requisito de la primera ruta es que el placeholder debe ser numérico, de manera que si pasamos un titulo alfanumérico en el placeholder, descartará la ejecución de la listAction por que este valor no es un número, tal y como hemos indicado.</p>
<p>Para poder establecer un valor por defecto para un  placeholder, basta con asignarle el valor por defecto al parámetro de la acción llamada como el placeholder, public function listAction(<strong>$page = 1</strong>)</p>
<p>Las rutas pueden ser descritas como anotaciones en el código, pero también se pueden generar en un archivo específico (app/config/routing.yml). Aquí podremos describir más rutas para la aplicación, e incluso se puede definir para que incluya rutas de otras fuentes. En este caso seria necesario borrar previamente las que tengamos definidas</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app/config/routing.yml</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Estas lineas definen el comportamiento</span></span><br><span class="line"><span class="comment"># estandar de leer la rutas de las anotaciones del código</span></span><br><span class="line"><span class="attr">app:</span></span><br><span class="line"><span class="attr">    resource:</span> <span class="string">"@AppBundle/Controller/"</span></span><br><span class="line"><span class="attr">    type:</span>     <span class="string">annotation</span></span><br><span class="line"><span class="comment"># Al definir las rutas en los controladores estas rutas son innecesarias, no utilizar</span></span><br><span class="line"><span class="attr">blog_list:</span></span><br><span class="line"><span class="attr">    path:</span>      <span class="string">/blog/&#123;page&#125;</span></span><br><span class="line"><span class="attr">    defaults:</span>  <span class="string">&#123;</span> <span class="attr">_controller:</span> <span class="attr">AppBundle:Blog:list,</span> <span class="attr">page:</span> <span class="number">1</span> <span class="string">&#125;</span></span><br><span class="line"><span class="attr">    requirements:</span></span><br><span class="line"><span class="attr">        page:</span> <span class="string">'\d+'</span></span><br><span class="line"><span class="attr">blog_read:</span></span><br><span class="line"><span class="attr">    path:</span>      <span class="string">/blog/&#123;title&#125;</span></span><br><span class="line"><span class="attr">    defaults:</span>  <span class="string">&#123;</span> <span class="attr">_controller:</span> <span class="attr">AppBundle:Blog:read</span>  <span class="string">&#125;</span></span><br><span class="line"><span class="attr">    requirements:</span></span><br><span class="line"><span class="attr">        title:</span> <span class="string">'\S+'</span></span><br></pre></td></tr></table></figure>

<h3 id="Fin-de-la-primera-parte"><a href="#Fin-de-la-primera-parte" class="headerlink" title="Fin de la primera parte"></a>Fin de la primera parte</h3><p>Con esto tenemos ya montado el core del framework, así como nuestros primeros controladores. Symfony es inmenso, para poder hablar un poco con detalle de algunas de sus partes voy a dividir el contenido en una serie de posts comentando lo que creo más útil para empezar a usarlo como una base de desarrollo. La próxima entrada será acerca de Twig el motor de plantillas, montaremos un <strong>Layout básico</strong> para poder crear un pequeño backend. Había pensado en continuar con el ORM Doctrine pero me parece más lógico empezar por la visualización y más tarde poder montar pantallas funcionales donde hacer CRUD, listados, etc…</p>
</div><div class="tags"><a href="/tags/PHP/">PHP</a><a href="/tags/Herramientas/">Herramientas</a><a href="/tags/Tutorial/">Tutorial</a><a href="/tags/Frameworks/">Frameworks</a></div><div class="post-nav"><a href="/tutorial-symfony-twig/" class="pre"><i class="icon-previous">Tutorial de Symfony 3: Twig, base layout con Bootstrap</i></a><a href="/refactorizando-reactphp-slim/" class="next">Refactorizando reactphp-slim<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'mercenariophp';
var disqus_identifier = 'tutorial-symfony/';
var disqus_title = 'Tutorial de Symfony 3: Instalación, routing y controllers';
var disqus_url = 'https://www.mercenariophp.com/tutorial-symfony/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//mercenariophp.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"><input type="hidden" name="sitesearch" value="https://www.mercenariophp.com"></form></div><div class="widget lessMargin"><div style="text-align: left;"><div style="width: 84px; height: 40px;"><a href="https://twitter.com/mercenariophp" rel="nofollow" target="_blank" class="twitter_big"></a><a href="https://es.linkedin.com/in/moisés-barquín-salgado-b6148296" rel="nofollow" target="_blank" class="linkedin_big"></a></div></div></div><div class="widget"><div class="widget-title">Categorías</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Desarrollo/">Desarrollo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tutoriales-Symfony/">Tutoriales Symfony</a></li></ul></div><div class="widget"><div class="widget-title">Etiquetas</div><div class="tagcloud"><a href="/tags/tests/" style="font-size: 15px;">tests</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Laravel/" style="font-size: 15px;">Laravel</a> <a href="/tags/PagesGenerator/" style="font-size: 15px;">PagesGenerator</a> <a href="/tags/Herramientas/" style="font-size: 15px;">Herramientas</a> <a href="/tags/Tutorial/" style="font-size: 15px;">Tutorial</a> <a href="/tags/PHPUnit/" style="font-size: 15px;">PHPUnit</a> <a href="/tags/Composer/" style="font-size: 15px;">Composer</a> <a href="/tags/NetBeans/" style="font-size: 15px;">NetBeans</a> <a href="/tags/IDE/" style="font-size: 15px;">IDE</a> <a href="/tags/ReactPHP/" style="font-size: 15px;">ReactPHP</a> <a href="/tags/Slim/" style="font-size: 15px;">Slim</a> <a href="/tags/SQL/" style="font-size: 15px;">SQL</a> <a href="/tags/Pattern/" style="font-size: 15px;">Pattern</a> <a href="/tags/Repositorio/" style="font-size: 15px;">Repositorio</a> <a href="/tags/Frameworks/" style="font-size: 15px;">Frameworks</a></div></div><div class="widget"><div class="widget-title">Recientes</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/php-dotenv-variables-entorno/">PHP Dotenv, configuración en variables de entorno</a></li><li class="post-list-item"><a class="post-list-link" href="/vacaciones/">Vacaciones</a></li><li class="post-list-item"><a class="post-list-link" href="/retornando-objetos-valor/">Retornando objetos de valor en lugar de arrays</a></li><li class="post-list-item"><a class="post-list-link" href="/tutorial-symfony-bundles-knpmenubundle/">Tutorial de Symfony 3: Bundles y KnpMenuBundle</a></li><li class="post-list-item"><a class="post-list-link" href="/descarga-ficheros-comprimidos-Archivestream-php/">Descarga de ficheros comprimidos con ArchiveStream-php</a></li><li class="post-list-item"><a class="post-list-link" href="/tutorial-symfony-doctrine-orm/">Tutorial de Symfony 3: Doctrine ORM y Base de Datos</a></li><li class="post-list-item"><a class="post-list-link" href="/tutorial-symfony-twig/">Tutorial de Symfony 3: Twig, base layout con Bootstrap</a></li><li class="post-list-item"><a class="post-list-link" href="/tutorial-symfony/">Tutorial de Symfony 3: Instalación, routing y controllers</a></li><li class="post-list-item"><a class="post-list-link" href="/refactorizando-reactphp-slim/">Refactorizando reactphp-slim</a></li><li class="post-list-item"><a class="post-list-link" href="/editor-hackeable-atom/">Editor hackeable Atom, el editor para el siglo 21</a></li></ul></div><div class="widget"><div class="widget-title">Comentarios recientes</div><script type="text/javascript" src="//mercenariophp.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title">Blogroll</div><ul></ul><a href="http://www.phptherightway.com/" title="PHP The Right Way" target="_blank">PHP The Right Way</a></div></div></div></div><div id="footer"><a href="https://twitter.com/mercenariophp" rel="nofollow" class="twitter"></a> <a href="https://es.linkedin.com/in/moisés-barquín-salgado-b6148296" rel="nofollow" class="linkedin"></a> © <a href="/." rel="nofollow">mercenariophp.</a> With<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-78289384-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>